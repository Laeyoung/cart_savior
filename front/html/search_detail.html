<!DOCTYPE html>
<html lang="ko">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Cart Savior | 상세</title>
	<link rel="stylesheet" href="../css/style.css">
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.min.js"></script>
</head>
<body>
	<header class="header">
		<h1 class="logo">
			<a href="#">
				<img class="hidden-m" src="../images/logo_pc.svg" alt="cart savior">
				<img class="hidden-p visible-m" src="../images/logo_m.svg" alt="cart savior">
			</a>
		</h1>
		<div class="search_bar">
			<form action="/search">
				<input class="inp_search" type="text" name="" id="" placeholder="오늘의 무 값은?"/>
				<button class="btn_search" type="submit">검색하기</button>
			</form>
		</div>
	</header>
	<section class="container detail_wrap">
		<div class="flex-item">
			<div class="item_info type_100">
				<h3 class="title">깐마늘</h3>
				<span class="sub_title">깐마늘 (국산) (1kg)</span>
			</div>
		</div>
		<div class="detail_info_wrap flex-layout">
			<div class="flex-item col-p-4 col-m-12">
				<div class="detail_item">
					<div class="detail_info">
						<span class="date">4월 20일 기준</span>
						<strong class="price">평균가는<br/><span class="txt_green">999,999,000원</span>입니다.</strong>
						<strong class="price">전주 대비<br/><span class="txt_up">500원 더 비싸요.</span></strong>
						<span class="date">지난 주 평균가 : 230,000원</span>
					</div>
					<span class="detail_source">자료 : 한국농수산식품유통공사</span>
				</div>
			</div>
			<div class="flex-item col-p-8 col-m-12">
				<div class="detail_graph">
					<h3 class="title_md">지난 깐마늘 가격을 확인해보세요.</h3>
					<div id="chart"></div>
				</div>
			</div>
		</div>
	</section>
	<footer class="footer">
		<p>Copyright (C) 2020. CART SAVIOR all rights reserved.</p>
	</footer>
</body>
<script>
	// var ctx = document.getElementById('myChart').getContext('2d');
	// var myChart = new Chart(ctx, {
	// 	type: 'line',
	// 	data: {
	// 		labels: ['오늘', '하루 전', '한달 전', '일년 전'],
	// 		datasets: [{
	// 			// label: '# of Votes',
	// 			data: [23000, 19000, 10000, 30000],
	// 			// backgroundColor: [
	// 			// 	'rgba(255, 255, 255)',
	// 			// ],
	// 			borderColor: [
	// 				'rgba(255, 255, 255)',
	// 			],
	// 			borderWidth: 2
	// 		}]
	// 	},
	// 	options: {
	// 		scales: {
	// 			yAxes: [{
	// 				ticks: {
	// 					// stacked: true
	// 					beginAtZero: true
	// 				}
	// 			}]
	// 		}
	// 	}
	// });
	//------------------------1. PREPARATION------------------------//
//-----------------------------SVG------------------------------// 
const div = d3.select('#chart'),
margin = { top: 40, right: 10, bottom: 30, left: 30 },
width = parseInt(d3.select("#chart").style("width")) - margin.right - margin.left,
height = parseInt(d3.select("#chart").style("height")) - margin.top - margin.bottom
  
const maxY = 100  
const data = Array(3).fill().map(() => d3.randomUniform(maxY)())

const curves = [
	'curveLinear',
  'curveBasis',
  'curveBundle',
  'curveCardinal',
  'curveCatmullRom',
  'curveMonotoneX',
  'curveMonotoneY',
  'curveNatural',
  'curveStep',
  'curveStepAfter',
  'curveStepBefore',
  'curveBasisClosed'
]

const svg = div.append('svg')
	.attr('width', width + margin.left + margin.right)
  .attr('height', height + margin.top + margin.bottom)
  .append('g')
  .attr('transform', `translate(${margin.left}, ${margin.top})`)
//   .style('background-color', '#4ea37a')
  

/*
 * X and Y scales.
 */
const xScale = d3.scaleLinear()
	.domain([0, data.length - 1])
  .range([0, width])

const yScale = d3.scaleLinear()
		.domain([0, maxY])
    .range([height, 0])

/*
 * The function that describes how the line is drawn.
 * Notice that we apply the xScale and yScale to the
 * data in order to keep the data in bounds to our scale.
 */
const line = d3.line()
	.x((d, i) => xScale(i))
  .y(d => yScale(d))
  .curve(d3[curves[5]])

/*
 * X and Y axis
 */
const xAxis = svg.append('g')
	.attr('class', 'x axis')
  .attr('transform', `translate(0, ${height})`)
  .call(d3.axisBottom(xScale))

const yAxis = svg.append('g')
	.attr('class', 'y axis')
  .call(d3.axisLeft(yScale))

/*
 * Appending the line to the SVG.
 */
svg.append('path')
	.datum(data)
  .attr('class', 'data-line glowed')
  .style('stroke','#4ea37a')
  .style('stroke-width', 3)
  .style('fill', 'none')
  .attr('d', line)

/*
 * Add little circles at data points.
 */
const circles = svg.selectAll('circle')
	.data(data)
  .enter()
  .append('circle')
  .attr('class', 'circle')
  .attr('cx', (d, i) => xScale(i))
  .attr('cy', d => yScale(d))
	.attr('r',7)
  .style('fill', '#fff')
  .style('stroke', '#4ea37a')
  .style('stroke-width', 3)


/*
 * Glow effects (Optional)
 */
// const defs = svg.append('defs')
// const glowDeviation = '4.5'

// Filter for the outside glow
// const filter = defs.append('filter').attr('id', 'glow')
// filter.append('feGaussianBlur')
//     .attr('stdDeviation', glowDeviation)
//     .attr('result', 'coloredBlur')
    
// const feMerge = filter.append('feMerge')
// feMerge.append('feMergeNode').attr('in', 'coloredBlur')
// feMerge.append('feMergeNode').attr('in', 'SourceGraphic')

// Add the glow!!
// d3.selectAll('.glowed').style('filter', 'url(#glow)')

</script>
</html>
